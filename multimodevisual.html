<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Generative Dot Playground</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; background: #000; color: white; font-family: sans-serif; }
    #ui {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.7);
      padding: 10px;
      border-radius: 8px;
    }
    select, label, input, button {
      display: block;
      margin-bottom: 6px;
      font-size: 14px;
    }
    button {
      margin-top: 10px;
      padding: 5px 10px;
    }
  </style>
</head>
<body>
  <div id="ui">
    <label for="modeSelect">Mode</label>
    <select id="modeSelect">
      <option value="dotwave">Dot Wave</option>
    </select>

    <label>Grid Size</label>
    <input type="range" id="gridSize" min="10" max="80" value="40"/>

    <label>Amplitude</label>
    <input type="range" id="amplitude" min="1" max="100" value="40"/>

    <label>Frequency</label>
    <input type="range" id="frequency" min="0.01" max="0.1" step="0.005" value="0.03"/>

    <label>Dot Size</label>
    <input type="range" id="dotSize" min="1" max="8" value="3"/>

    <button onclick="saveCanvas('dot_visual', 'png')">Export PNG</button>
  </div>

  <script>
    let cols, rows;
    let mode = 'dotwave';

    function setup() {
      createCanvas(windowWidth, windowHeight);
      noStroke();
    }

    function draw() {
      background(0);
      if (mode === 'dotwave') drawDotWave();
    }

    function drawDotWave() {
      let grid = parseInt(document.getElementById('gridSize').value);
      let amp = parseFloat(document.getElementById('amplitude').value);
      let freq = parseFloat(document.getElementById('frequency').value);
      let dotSize = parseFloat(document.getElementById('dotSize').value);

      cols = grid;
      rows = grid;
      let spacingX = width / cols;
      let spacingY = height / rows;

      for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
          let offsetX = sin((x + frameCount * 0.02) * freq) * amp;
          let offsetY = cos((y + frameCount * 0.02) * freq) * amp;
          let px = x * spacingX + offsetX;
          let py = y * spacingY + offsetY;
          fill(255);
          circle(px, py, dotSize);
        }
      }
    }

    document.getElementById('modeSelect').addEventListener('change', (e) => {
      mode = e.target.value;
    });

    function windowResized() {
      resizeCanvas(windowWidth, windowHeight);
    }
  </script>
</body>
</html>
